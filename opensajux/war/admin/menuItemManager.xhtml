<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:m="http://java.sun.com/jsf/composite/menu">

<ui:composition template="/templates/admin/masterLayout.xhtml">
	<ui:define name="title">MenuItem - Administration Panel</ui:define>

	<ui:define name="content">
		<f:metadata>
			<f:viewParam name="menu_name" value="#{menuItemManager.menuName}" />
		</f:metadata>
		<h:outputText value="Menu: " />
		<h:outputLink>#{param['menu_name']}</h:outputLink>

		<br />
		<br />
		<h:outputLink
			value="/admin/addMenuItem.jsf?menu_name=#{param['menu_name']}">Add </h:outputLink>
		<p:commandLink value="Remove" onclick="confirm.show()" />
		<p:confirmDialog
			message="Are you sure you want to delete the selected menu items?"
			header="Confirm Delete" severity="alert" widgetVar="confirm">
			<p:commandButton value="No" type="button" onclick="confirm.hide()" />
			<p:commandButton value="Yes" update="menuTable"
				oncomplete="confirm.hide()" />
		</p:confirmDialog>

		<p:dataTable id="menuTable" var="item"
			value="#{menuItemManager.menuItemModel}" dynamic="true" lazy="true"
			selectionMode="multiple" rowKey="#{item.key.id}"
			selection="#{menuItemManager.selectedMenuItems}" paginator="true"
			rows="10" rowsPerPageTemplate="10,20,50,100"
			paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">
			<p:column resizable="true" sortBy="#{item.title}"
				filterBy="#{item.title}">
				<f:facet name="header">
					<h:outputText value="Title" />
				</f:facet>
				<h:outputLink value="#{item.url}">#{item.title}</h:outputLink>
			</p:column>
			<p:column resizable="true">
				<f:facet name="header">
					<h:outputText value="Published?" />
				</f:facet>
				<h:selectBooleanCheckbox value="#{item.published}"
					valueChangeListener="#{menuItemManager.changePublishedState}" />
			</p:column>
			<p:column resizable="true" sortBy="#{item.url}"
				filterBy="#{item.url}">
				<f:facet name="header">
					<h:outputText value="Url" />
				</f:facet>
				<h:outputText value="#{item.url}" />
			</p:column>
			<p:column resizable="true" sortBy="#{item.ordering}"
				filterBy="#{item.ordering}">
				<f:facet name="header">
					<h:outputText value="Order" />
				</f:facet>
				<h:outputText value="#{item.ordering}" />
			</p:column>
		</p:dataTable>
	</ui:define>
</ui:composition>

</html>
